#Viikkoraportti 5

Tällä viikolla olen käyttänyt 20 tuntia tähän kurssiin. Olen viikon aikana keskittynyt lähinnä tekoälyn hienosäätöön eli refaktorointiin, kälin parantamiseen ja bugien korjaamiseen. Olen viikon aikana edistynyt kohtuullisesti eli käli on mielestäni menettelevä (toimii), mutta bugien korjaus ei oikein ole sujunut. Kyseistä Play Again-bugia olen metsästänyt jo vähän viime viikolla ja sen sivutuotteena huomasinkin, että unohdin kumota sotilaiden korotuksen siirtoa kumotessa. Tällä viikolla kaikesta käytetystä ajasta hyvinkin meni puolet tähän, joten jos satut huomaamaan jotain omituista koodissa, arvostaisin todella sen ratkaisua.

Tässä siis selostus Play Again-bugista, joka kiusannut minua jo yli viikon. Kun tekoäly on mukana pelissä peli etenee aivan oikein, kuten kuuluukn, kunnes peli loppuu ja pelaaja päättää pelata uudelleen. Tämän jälkeen, ensimmäisen kerran, kun tekoäly päätyy shakkamaan vastustajan kuningasta seuraavaa siirtoa laskiessaan, seuraa NullPointerException, kun pyritään kumoamaan kokeiltua siirtoa shakkauksen kumomiseksi. Näin siis ruudussa, josta nappula alun perin siirrettiin, ei olekkaan nappulaa backUpissa, joka vastaa laudantilannetta ennen siirtoa.

Tässä pari omaa teoriaani asian syystä: jokin aiempi siirron kumoaminen epäonnistui, jolloin siirrettävä nappula onkin eri ruudussa, kuin sen pitäisi olla. Olen pohtinut pääni puhki, miten tämä olisi mahdollista ja ennen kaikkea: miksi kaikki toimii ok ennen pelin resetointia. Tämä on ollut pääteoriani, mutta mitään en ole muuten saanut selville kuin, että minulla oli moka sotilaiden korotuksessa ja se ei liitykkään tähän, vaikka ilmeni hieman samalla tavalla. Lisäksi kyseinen bugi ei esiinny ilman mukana olevaa tekoälyä eli ei tapahdu pelaajien väliessä pelissä. Toinen teoriani oli, että kyseisen nappulan osoitin jää vanhaan paikkaan monimutkaisemmissa siirroissa, joten tein uuden siirron kumoamismetodin tämän korjaamiseksi ilman tulosta.

Viikon hankalia asioita ovat olleet aikalailla kaikki, sillä sekä käli että bugit ovat tuottaneet ongelmia. Kälin lopulta sain toimimaan halutusti, mutta bugi tosiaan ei ratkennut. Kälissäkin aioin laittaa Ai vs Ai pelissävaikeustason valinnat vierekkäin, mutta jostain syystä tämä ei käynyt vaikka kokeilin niin box- kuin gridlayouttia. Toisaalta viehän kälin vaikeustason valinta nyt vähemmän tilaa....

Seuraava tavoitteeni on lähinnä dokumentoinnin/testien täydennys ja bugien korjaaminen, jos aikaa jää, saatan tehdä joitain pieniä lisäyksiä (voittavat valloitukset ennen häviä, joka on tosin alle 15 min homma).
